<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="format-detection" content="telephone=no">
    <meta name="description" content="TIOR, 모든 시승은 티오르에서">
    <meta name="keywords" content="티오르, tior, 시승예약, 시승, 시승플랫폼">
    <meta property="og:type" content="website">
    <meta property="og:title" content="언택트! 시승예약은 간편하게! 실시간 시승예약 서비스">
    <meta property="og:description" content="차량 구매 전 시승은 필수, 모든시승은 티오르에서">
    <meta property="og:image" content="https://m.tior.co.kr/resources/images/tior_favicon.png">
    <meta property="og:url" content="https://m.tior.co.kr/">
    <link href="../../resources/css/common.min.css" media="screen" rel="stylesheet">
    <link href="../../resources/css/drive.min.css" media="screen" rel="stylesheet">
    <title>TIOR, 모든 시승은 티오르에서</title>
</head>
<body>

<div id="wrap" class="type">
    <header id="header" class="fix top">
        <div class="headWrap">
            <h1 class="white">견적서 신청</h1>
            <a href="#n" class="ico ico_close"><span class="hide">닫기</span></a>
        </div>
    </header>
    <!-- //header -->

    <div id="content">
        <div class="estimate_component">
            <section class="estimate_desc">
                <h3 class="hurdle">견적서 신청</h3>
                <p>시승 예약한 <strong class="name">BMW 320d</strong><br><strong class="u">견적서 신청을 위해 추가정보를 입력</strong>해주세요.</p>
            </section>
            <section class="estimate_submit">
                <div class="necessary">
                    <strong class="title">구매 예정 시기 <em>(필수)</em></strong>
                    <ul class="slct_option col4">
                        <li><button type="button" class="active">1개월 이내</button></li>
                        <li><button type="button">3개월 이내</button></li>
                        <li><button type="button">6개월 이내</button></li>
                        <li><button type="button">미정</button></li>
                    </ul>
                </div>
                <div class="payment">
                    <strong class="title">구매 방법</strong>
                    <ul class="slct_option col3">
                        <li><button type="button">할부</button></li>
                        <li><button type="button">리스</button></li>
                        <li><button type="button">현금</button></li>
                    </ul>
                </div>
                <div class="per" style="display: none;">
                    <strong class="title">선납금</strong>
                    <div class="range_per" data-value="30">
                        <div class="label">
                            <div class="value"><code class="per">30%</code>( <code class="price">3000</code>만원 )</div>
                            <div class="drop"></div>
                        </div>
                        <div class="range_box">
                            <em class="max hide">5480</em><!-- 여기에 금액 적어주세요 -->
                            <div class="range_line">
                                <ol id="range_slct" class="range_list">
                                    <li><button type="button" class="dot" data-per="0"><i>0%</i></button></li>
                                    <li><button type="button" class="dot" data-per="10"><i>10%</i></button></li>
                                    <li><button type="button" class="dot" data-per="20"><i>20%</i></button></li>
                                    <li><button type="button" class="dot" data-per="30"><i>30%</i></button></li>
                                    <li><button type="button" class="dot" data-per="40"><i>40%</i></button></li>
                                    <li><button type="button" class="dot" data-per="50"><i>50%</i></button></li>
                                    <li><button type="button" class="dot" data-per="60"><i>60%</i></button></li>
                                    <li><button type="button" class="dot" data-per="70"><i>70%</i></button></li>
                                    <li><button type="button" class="dot" data-per="80"><i>80%</i></button></li>
                                    <li><button type="button" class="dot" data-per="90"><i>90%</i></button></li>
                                    <li><button type="button" class="dot" data-per="100"><i>100%</i></button></li>
                                </ol>
                            </div>
                        </div>
                        <ol class="range_perlist">
                            <li>0%</li>
                            <li>50%</li>
                            <li>100%</li>
                        </ol>
                    </div>
                </div>
                <div class="monthly" style="display: none;">
                    <strong class="title">개월 수</strong>
                    <ul class="slct_option col3">
                        <li><button type="button">36개월</button></li>
                        <li><button type="button">48개월</button></li>
                        <li><button type="button">60개월</button></li>
                    </ul>
                </div>
            </section>
        </div>
    </div>
    <!-- //content -->

    <div class="btn_area_float fix btm">
        <button type="button" onclick="" class="btn_xr skip">견적서 신청</button>
    </div>
</div>


<script src="../../resources/js/jquery-1.12.4.min.js"></script>
<script src="../../resources/js/design.js"></script>
<script>
$(function() {
    hurdleSc()
    slctOptHandler()
    rangeSlctBtnHandler()

    // 견적서옵션버튼선택
    function slctOptHandler() {
        $('.slct_option button').on('click', function() {
            var target = this;
            var targetWrap = $(this).closest('div');
            // 활성화버튼 필터링
            var actBtns = [];
            $(targetWrap).find('button').each(function(idx, item) {
                if($(item).hasClass('active')) actBtns.push(item);
            });
            if($(targetWrap).hasClass('necessary')) {
                // 필수값
                $(actBtns).removeClass('active');
                $(target).addClass('active');
            } else if($(targetWrap).hasClass('payment')) {
                // 선납금 방법 및 금액
                $(target).toggleClass('active');
                $(actBtns).removeClass('active');
                if($(target).text() == "할부" && $(target).hasClass('active') || $(target).text() == "리스" && $(target).hasClass('active')) {
                    $('.monthly').show();
                    $('.per').show();
                    var targetTop = $('.per').offset().top;
                    $('html,body').animate({scrollTop: targetTop},400);
                } else {
                    $('.monthly').hide();
                    $('.per').hide();
                }
            } else {
                // 나머지
                $(target).toggleClass('active');
                $(actBtns).removeClass('active');
            }
        })
    }

    // 선납금 range
    function rangeSlctBtnHandler() {
        var dots = $('#range_slct button');
        getRangeValue(dots, dots[3])
        dots.on('keyup, mouseup', function() {
            getRangeValue(dots, this)
        })
        $(window).on('resize', function() {
            getRangeValue(dots, dots[3])
        })
    }
    function getRangeValue(dots, target) {
        $(dots).removeClass('focus')
        $(target).addClass('focus')
        var value = target.getAttribute('data-per');
        var range = $(target).parents('.range_per');
        var max = $(range).find('.max').text();
        var don = Math.ceil(max * value / 100);
        don = String(don).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        var rangeVal = {
            per: $(range).find('.value .per'),
            price: $(range).find('.value .price'),
        }
        $(range).attr('data-value', value);
        $(rangeVal.per).text(value + '%');
        $(rangeVal.price).text(don);
    }
});
</script>

</body>
</html>