<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta http-equiv="Content-Language" content="ko-KR">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Anonymous+Pro&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Oleo+Script:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700;900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@100;400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.4.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/5.2.3/ionicons.min.js"></script>
<title></title>
<style>
*{padding:0;margin:0;font-family:'Malgun Gothic', arial, san-serif}
.pageMap .d1{margin-right:500px;padding:0 10px;box-sizing:border-box;list-style:none;margin-bottom:30px}
button{border:0;background-color:transparent;cursor:pointer}
h1{position:fixed;top:0;right:0;z-index:20}
h1 span{color:#fff}
table{width:100%;border:0;border-top:1px solid #434343;border-right:1px solid #e5e5e5;border-collapse:collapse;border-spacing:0;color:#353535;word-break:break-all;font-size:12px}
table th{padding:8px 0;background:#666;border-left:1px solid #e5e5e5;font-weight:bold;color:#fff;text-align:center}
table th:first-child{border-left:0}
table tbody th, table tbody td{padding:8px}
table tbody th{background:none;text-align:left}
table tbody td{border-left:1px solid #e5e5e5;border-bottom:1px solid #e5e5e5}
table tbody td p{display:inline-block;width:45%}
table tbody td p::before{content:'▶'}
table tbody td p:first-child::before{content:''}
table tbody td span{line-height:16px}
table tbody tr:hover td{background-color:#fffcde}
table tbody tr.on td{background-color:#fff8a4}
.move{padding:10px;position:fixed;top:0;left:0;width:100%;background-color:#fff;border-bottom:1px solid #f3f3f3;z-index:10}
.move a{margin-right:0;text-decoration:none;color:#ff8f00;display:inline-block;padding:5px 10px;font-size:14px;background-color:#fff;border:1px solid #ddd;border-radius:5px}
.move_top{position:fixed;right:15px;bottom:25px;width:60px;height:35px;background:#000;color:#fff;line-height:35px;text-align:center;font-size:12px}
.move p{margin-top:10px;font-size:12px}
h2{padding:30px 10px 10px 10px;border-bottom:1px solid #222}
h2 button{width:24px;height:24px;background-color:#eee;border:1px solid #ccc;border-radius:100px;text-align:center;font-style:normal;cursor:pointer;vertical-align:middle;margin-top:-6px}
@media screen and (max-width:585px) {
  h1 {display:none}
}
.bold{font-weight:bold}
.viewer_wrap{position:fixed;right:30px;top:90px;width:405px;height:705px}
.viewer_wrap::before{content:'';display:block;width:30px;height:4px;background-color:#fff;border-radius:2px;position:absolute;top:12px;left:50%;margin-left:-15px}
.viewer{border:15px solid #000;border-top:30px solid #000;border-radius:10px;width:100%;height:100%;box-sizing:border-box}
.viewer iframe{border:0;width:100%;height:100%}
.blank_link{margin-left:10px;display:inline-block;padding:0 10px;border:1px solid #999;border-radius:3px;text-decoration:none}
.link a:hover{font-weight:bold}
.link input{position:absolute;width:1px;height:1px;clip:rect(1px,1px,1px,1px)}
.btn_area .wh,.btn_area .hf{margin-top:5px}
.btn_area button, .btn_area a{padding:1px 10px;border:1px solid #086cfd;background-color:#fff;color:#000;font-size:14px;border-radius:3px;text-decoration:none}
.btn_area .on{background-color:#086cfd;color:#fff}
.state{text-align:center}
.state span{display:inline-block;padding:0 8px;text-decoration:none}
.state.validation, .state.validation span{color:#666}
.state.send, .state.send span{background-color:darkorange}
.state.undecided, .state.undecided span{color:#bbb}
.state.working, .state.working span{color:#333}
.state.working span{background-color:#e3e3e3}
.state.complete, .state.complete span{color:#fff}
.state.complete span{background-color:#86b248}
.state.modify, .state.modify span{color:#fff}
.state.modify span{background-color:#b24848}
.state.hold, .state.hold span{color:#000}
.state.hold span{background-color:#ffad66}
.state.delete, .state.delete span{color:#000}
.state.delete span{background-color:#ccc}

td.history{text-align:center}
td.history > div{position:relative}
.fold-text.fold{display:block;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;word-wrap:break-word;line-height:1.4;max-height:3em}
.fold-btn{width:25px;cursor:pointer;border:1px solid #eee;margin-top:5px}
.fold-btn::before{content:'▲'}
.fold-btn.fold::before{content:'▼'}
.fixes{position:absolute;top:30px;left:0;width:300px;background-color:#fff;border:1px solid #eee;padding:10px;text-align:left}
.fixes ul{padding-left:20px}

.searchFrm{display:inline-block;font-size:12px}
.searchFrm input{height:26px;width:120px;border:1px solid #ddd;padding-left:5px;text-transform:uppercase}
.searchFrm button{border:1px solid #ddd;border-radius:5px;font-size:14px;height:30px;padding:0 10px}
#gnb{height:30px}
a.root, #gnb, .searchFrm{margin-right:10px;margin-bottom:10px}

.menuview{width:auto;font-size:12px;padding:0 10px;display:none}
</style>
</head>
<body>

<aside class="viewer_wrap">
    <section class="viewer">
        <iframe name="divice" src=".html"></iframe>
    </section>
    <section class="btn_area">
        <div class="wh">
            <button>
                <w>320</w>
                <h>480</h>
            </button>
            <button>
                <w>360</w>
                <h>640</h>
            </button>
            <button>
                <w>375</w>
                <h>660</h>
            </button>
            <button>
                <w>390</w>
                <h>884</h>
            </button>
            <button>
                <w>414</w>
                <h>736</h>
            </button>
        </div>
    </section>
</aside>
<!-- //미리보기 -->

<div class="move">
    <a href="" target="_parent" class="root">작업가이드</a>
    <select id="gnb">
        <option value="m0">메뉴이동</option>
        <option value="m0">메인</option>
        <option value="m1">자산</option>
        <option value="m2">오픈뱅킹</option>
    </select>
    <div class="searchFrm">
        키워드검색: <input type="search" id="keywordOnly"> <button type="button" id="searchOnly">검색</button>
    </div>
</div>
<h1>워크시트<span></span></h1>

<div class="pageMap">
    <ul class="d1">
        <li id="m0">
            <h2>메인 <button>-</button> <button type="button" class="menuview">메뉴전체보기</button></h2>
            <table>
                <colgroup>
                    <col width="30%">
                    <col>
                    <col width="10%">
                    <col width="10%">
                    <col width="7%">
                </colgroup>
                <thead>
                    <tr>
                        <th scope="col">pagename</th>
                        <th scope="col">url</th>
                        <th scope="col">worker</th>
                        <th scope="col">state</th>
                        <th scope="col">history</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>페이지이름</td>
                        <td><span class="link">folder/pageid</span></td>
                        <td>작업자이름</td>
                        <td class="state">미정</td>
                        <td class="history">
                            <div class="fixes">
                                <strong class="date">210906</strong>
                                <ul>
                                    <li>수정사항내용&nbsp;<span class="state complete">완료</span></li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>페이지이름</td>
                        <td><span class="link">folder/pageid</span></td>
                        <td>작업자이름</td>
                        <td class="state">진행</td>
                        <td class="history"></td>
                    </tr>
                    <tr>
                        <td>페이지이름</td>
                        <td><span class="link">folder/pageid</span></td>
                        <td>작업자이름</td>
                        <td class="state">완료</td>
                        <td class="history"></td>
                    </tr>
                    <tr>
                        <td>페이지이름</td>
                        <td><span class="link">folder/pageid</span></td>
                        <td>작업자이름</td>
                        <td class="state">수정</td>
                        <td class="history"></td>
                    </tr>
                    <tr>
                        <td>페이지이름</td>
                        <td><span class="link">folder/pageid</span></td>
                        <td>작업자이름</td>
                        <td class="state">삭제</td>
                        <td class="history"> </td>
                    </tr>
                </tbody>
            </table>
        </li>
    </ul>
</div>

<script>
$(function(){
    var docuW = window.innerWidth;
    if(768 >= docuW){
        $('.viewer_wrap').css({'display':'none'});
        $('.d1').css({'margin-right':'0'});

        setTimeout(function(){
            $('.blank_link').css({'display':'none'});
            $('.link a').attr({'target':'_parent'});
            var count = $('.link').length;
        }, 1);
    }

    $('table .link').each(function(){
        var txt = $(this).text();
        var link1 = "<a href='html_app/"+ txt + ".html' target='device'></a>"
        var link2 = "<a href='html_app/"+ txt + ".html' target='_blank' class='blank_link'>새창</a>"
        var copy = "<a href='javascript:;' type='button' class='blank_link copy'>copy</a>"
        var input = "<input type='text' value="+txt+">"
        $(this).contents().wrap(link1);
        $(this).append(link2);
        $(this).append(copy);
        $(this).append(input);
        $(this).find('.copy').on('click', function() { // 주소복사
            $(this).next('input').select();
            document.execCommand('copy');
        });
    });

    var len = $('table tr').length - 14;
    $('h1 span').text(len);
    $('#m0 h2').css('padding-top', $('.move').outerHeight() + 20);
    $('h2 button.toggle').on('click', function(){ // 메뉴리스트 열고닫기
        if($(this).html()=="-"){
            $(this).parent().siblings('table').hide();
            $(this).html('+');
        }else{
            $(this).parent().siblings('table').show();
            $(this).html('-');
        }
    });

    $('table .link a').on('click', function(){ // 주소링크 클릭
        $('.pageMap table tr').removeClass('on');
        $(this).parents('tr').addClass('on');
        var txt = $(this).text();
        var link3 = "<a href='html_app/"+txt+".html' target='_blank'>새창</a>";
        $('.viewer_wrap .btn_area .hf a').remove();
        $('.viewer_wrap .btn_area .hf').append(link3);
    });

    $('.viewer_wrap .btn_area .wh button').on('click', function(){ // 미리보기 사이트 선택
        var d_w = parseInt($(this).children('w').text()) + 45;
        var d_h = parseInt($(this).children('h').text()) + 45;
        $('.viewer_wrap').css({'width':+d_w+'px', 'height':+d_h+'px'});
        $('.viewer_wrap .btn_area .wh button').removeClass('on');
        $(this).addClass('on');
    });

    function progressList(){ // 기본실행
        var $table = $('.pageMap');
        var tableTr = $table.find('tbody tr');
        var stateFields = $table.find('.state');
        var historyFields = $table.find('td.history');

        stateFields.each(function(i,v){
            var current = $(v);
            var prop = {
                type:"../" + current.parents('.pageMap').attr('data-type'),
                url:current.siblings('.url').text()
            };
            var wrapAnchor = $('<span>').text(current.text());
            if(current.text() == '미정'){
                current.addClass('undecided');
                // if(!devMode) wrapAnchor = current.text();
            }else if(current.text() == '진행'){
                current.addClass('working');
            }else if(current.text() == '완료'){
                current.addClass('complete');
            }else if(current.text() == '수정'){
                current.addClass('modify');
            }else if(current.text() == '삭제'){
                current.addClass('delete');
            }
            current.html(wrapAnchor);
        });
        historyFields.each(function(i,v){ // 작업히스토리
            var current = $(v);
            if(current.text() != "" && current.text() != " "){
                var wrap = $("<div class='fold-text fold'>");
                wrap.html(current.html());
                current.html(wrap);
                current.append($('<button class="fold-btn fold"></button>'));
            }
        });
        $('.fold-btn').on('click', function(e) { // 작업히스토리 열고닫기
            e.preventDefault();
            var _this = $(e.currentTarget);
            _this.toggleClass('fold').prev().toggleClass('fold');
        });
    }
    progressList();

    // 키워드검색
    $('#keywordOnly').keyup(function(key){
        if($(this).val() === ''){
            $('tbody tr').show();
        }
        if(key.keyCode === 13){
            $('#searchOnly').trigger('click');
        }
    });
    $('#searchOnly').click(function(){
        var k = $('#keywordOnly').val().toUpperCase();
        $('tbody tr').hide();
        var temp = $('tr:contains('+k+')');
        $(temp).show();
        if($('#keywordOnly').val() === ''){
            $('.menuview').hide();
            $('.menuview').val().trigger('change');
        }else{
        $('.menuview').show();
        }
    });

    // 메뉴선택이동
    $('select#gnb').change(function(){
        var opt = $(this).children('option:selected').val();
        var offset = $('li#'+opt).offset();
        $('html,body').animate({scrollTop : offset.top - 30}, 300);
    });

    // 메뉴에 해당하는 페이지 전체보기
    $('.menuview').click(function(){
        $(this).parent().parent().find('tr').show();
    });

})
</script>

</body>
</html>       